INFO:src.config:Starting metrics computation test...
INFO:src.config:Loading product data from /path/to/5octobre_products.csv...
ERROR:src.config:Product file not found: [Errno 2] No such file or directory: '/path/to/5octobre_products.csv'
INFO:src.config:Loading cleaned data files...
INFO:src.config:Successfully loaded cleaned data files
DEBUG:src.config:Cart data shape: (1862, 6)
DEBUG:src.config:Order data shape: (1360, 9)
INFO:src.config:Computing basic KPIs...
DEBUG:src.config:Basic KPIs calculated: {'total_orders': 1360, 'total_revenue': 860979.0, 'unique_customers': 1091, 'avg_orders_per_customer': 1.2465627864344637}
INFO:src.config:Basic KPIs computation complete
INFO:src.config:Basic KPIs: {'total_orders': 1360, 'total_revenue': 860979.0, 'unique_customers': 1091, 'avg_orders_per_customer': 1.2465627864344637}
INFO:src.config:Computing revenue over time with frequency M...
DEBUG:src.config:Revenue series shape: (45,)
INFO:src.config:Revenue over time computation complete
INFO:src.config:Monthly Revenue:
Date
2021-04-30    15100.0
2021-05-31     8262.0
2021-06-30     9317.0
2021-07-31    12347.0
2021-08-31     7771.0
2021-09-30    13468.0
2021-10-31     6826.0
2021-11-30    16714.0
2021-12-31    41530.0
2022-01-31    19938.0
2022-02-28    15573.0
2022-03-31    11283.0
2022-04-30    12162.0
2022-05-31    17932.0
2022-06-30    17617.0
2022-07-31     9228.0
2022-08-31    12755.0
2022-09-30    32952.0
2022-10-31    20530.0
2022-11-30    22945.0
2022-12-31    30637.0
2023-01-31    29729.0
2023-02-28    21130.0
2023-03-31    16112.0
2023-04-30    14050.0
2023-05-31    24350.0
2023-06-30    28306.0
2023-07-31    34661.0
2023-08-31    10942.0
2023-09-30    18259.0
2023-10-31    23185.0
2023-11-30    17794.0
2023-12-31    54995.0
2024-01-31    12602.0
2024-02-29    15209.0
2024-03-31    17175.0
2024-04-30    12940.0
2024-05-31    13222.0
2024-06-30    18202.0
2024-07-31    18870.0
2024-08-31     5815.0
2024-09-30    21315.0
2024-10-31    24972.0
2024-11-30    23590.0
2024-12-31    28667.0
Freq: ME, Name: Total, dtype: float64
INFO:src.config:Computing average order value...
DEBUG:src.config:Calculated AOV: 633.072794117647
INFO:src.config:AOV computation complete
INFO:src.config:Average Order Value: 633.072794117647
INFO:src.config:Computing cart abandonment rate...
DEBUG:src.config:Cart abandonment rate: 100.0%
INFO:src.config:Cart abandonment rate computation complete
INFO:src.config:Cart Abandonment Rate: 100.0%
INFO:src.config:Analyzing customer count with frequency M...
DEBUG:src.config:Customer count series shape: (45,)
INFO:src.config:Customer count analysis complete
INFO:src.config:Monthly Unique Customers:
Date
2021-04-30    34
2021-05-31    19
2021-06-30    19
2021-07-31    23
2021-08-31    16
2021-09-30    33
2021-10-31    16
2021-11-30    28
2021-12-31    81
2022-01-31    30
2022-02-28    23
2022-03-31    26
2022-04-30    21
2022-05-31    28
2022-06-30    29
2022-07-31    18
2022-08-31    18
2022-09-30    31
2022-10-31    25
2022-11-30    29
2022-12-31    48
2023-01-31    42
2023-02-28    30
2023-03-31    26
2023-04-30    22
2023-05-31    30
2023-06-30    22
2023-07-31    39
2023-08-31    16
2023-09-30    29
2023-10-31    21
2023-11-30    32
2023-12-31    84
2024-01-31    23
2024-02-29    27
2024-03-31    22
2024-04-30    21
2024-05-31    24
2024-06-30    27
2024-07-31    21
2024-08-31    12
2024-09-30    30
2024-10-31    31
2024-11-30    31
2024-12-31    45
Freq: ME, Name: Client, dtype: int64
INFO:src.config:Determining customer lifecycle stages...
INFO:src.config:Customer Lifecycle Stages:
                   Client first_purchase_date  last_purchase_date  total_orders  days_since_last_purchase    stage
0                A. Aires 2022-08-02 09:51:50 2022-08-02 09:51:50             1                       867  At-Risk
1              A. Aldrees 2023-07-14 16:56:43 2023-08-30 15:48:45             2                       474  At-Risk
2  A. Arrighi de Casanova 2023-12-04 23:09:30 2023-12-04 23:09:30             1                       378  At-Risk
3             A. Ascanio  2021-05-07 19:11:10 2022-09-17 09:15:04             3                       822  At-Risk
4               A. BALOIU 2022-12-04 17:44:16 2022-12-04 17:44:16             1                       743  At-Risk
INFO:src.config:Computing churn rate...
INFO:src.config:Monthly Churn Rates:
2021-05-01     97.058824
2021-06-01    100.000000
2021-07-01    100.000000
2021-08-01     95.652174
2021-09-01     87.500000
2021-10-01    100.000000
2021-11-01    100.000000
2021-12-01     92.857143
2022-01-01     98.765432
2022-02-01    100.000000
2022-03-01     95.652174
2022-04-01     92.307692
2022-05-01     90.476190
2022-06-01     92.857143
2022-07-01    100.000000
2022-08-01    100.000000
2022-09-01    100.000000
2022-10-01     93.548387
2022-11-01     92.000000
2022-12-01     96.551724
2023-01-01    100.000000
2023-02-01     88.095238
2023-03-01     93.333333
2023-04-01     92.307692
2023-05-01     95.454545
2023-06-01     86.666667
2023-07-01     90.909091
2023-08-01     94.871795
2023-09-01     93.750000
2023-10-01    100.000000
2023-11-01     90.476190
2023-12-01     93.750000
2024-01-01     96.470588
2024-02-01     95.833333
2024-03-01     92.592593
2024-04-01     95.454545
2024-05-01     95.238095
2024-06-01     95.833333
2024-07-01    100.000000
2024-08-01     95.238095
2024-09-01    100.000000
2024-10-01     96.666667
2024-11-01    100.000000
2024-12-01    100.000000
dtype: float64
INFO:src.config:Calculating CLV...
INFO:src.config:Estimated CLV: 9449.090173612982
WARNING:src.config:No order_items_df found. Product-level metrics limited.
DEBUG:matplotlib:matplotlib data path: /Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/matplotlib/mpl-data
DEBUG:matplotlib:CONFIGDIR=/Users/benpfeffer/.matplotlib
DEBUG:matplotlib:interactive is False
DEBUG:matplotlib:platform is darwin
DEBUG:matplotlib:CACHEDIR=/Users/benpfeffer/.matplotlib
DEBUG:matplotlib.font_manager:Using fontManager instance from /Users/benpfeffer/.matplotlib/fontlist-v390.json
DEBUG:matplotlib.pyplot:Loaded backend macosx version unknown.
DEBUG:tensorflow:Falling back to TensorFlow client; we recommended you install the Cloud TPU client directly with pip install cloud-tpu-client.
DEBUG:h5py._conv:Creating converter from 7 to 5
DEBUG:h5py._conv:Creating converter from 5 to 7
DEBUG:h5py._conv:Creating converter from 7 to 5
DEBUG:h5py._conv:Creating converter from 5 to 7
INFO:src.config:Computing extended metrics...
INFO:src.config:Computing basic KPIs...
DEBUG:src.config:Basic KPIs calculated: {'total_orders': 1360, 'total_revenue': 860979.0, 'unique_customers': 1091, 'avg_orders_per_customer': 1.2465627864344637}
INFO:src.config:Basic KPIs computation complete
INFO:src.config:KPIs: {'total_orders': 1360, 'total_revenue': 860979.0, 'unique_customers': 1091, 'avg_orders_per_customer': 1.2465627864344637}
INFO:src.config:Computing revenue over time with frequency M...
DEBUG:src.config:Revenue series shape: (45,)
INFO:src.config:Revenue over time computation complete
INFO:src.config:Performing customer segmentation...
DEBUG:src.config:Customer segmentation shape: (1091, 4)
INFO:src.config:Customer segmentation complete
INFO:src.config:Performing RFM analysis...
DEBUG:src.config:RFM analysis shape: (1091, 7)
INFO:src.config:RFM analysis complete
INFO:prophet:Disabling weekly seasonality. Run prophet with weekly_seasonality=True to override this.
INFO:prophet:Disabling daily seasonality. Run prophet with daily_seasonality=True to override this.
DEBUG:cmdstanpy:input tempfile: /var/folders/8p/tyj3gj5j7f54558fzrt60f700000gn/T/tmp7lmi_eqh/oc_603fh.json
DEBUG:cmdstanpy:input tempfile: /var/folders/8p/tyj3gj5j7f54558fzrt60f700000gn/T/tmp7lmi_eqh/lkwnl6xq.json
DEBUG:cmdstanpy:idx 0
DEBUG:cmdstanpy:running CmdStan, num_threads: None
DEBUG:cmdstanpy:CmdStan args: ['/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/prophet/stan_model/prophet_model.bin', 'random', 'seed=16285', 'data', 'file=/var/folders/8p/tyj3gj5j7f54558fzrt60f700000gn/T/tmp7lmi_eqh/oc_603fh.json', 'init=/var/folders/8p/tyj3gj5j7f54558fzrt60f700000gn/T/tmp7lmi_eqh/lkwnl6xq.json', 'output', 'file=/var/folders/8p/tyj3gj5j7f54558fzrt60f700000gn/T/tmp7lmi_eqh/prophet_modelzeiutdr9/prophet_model-20241220163923.csv', 'method=optimize', 'algorithm=newton', 'iter=10000']
INFO:cmdstanpy:Chain [1] start processing
INFO:cmdstanpy:Chain [1] done processing
INFO:src.config:Revenue forecast generated.
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): huggingface.co:443
DEBUG:urllib3.connectionpool:https://huggingface.co:443 "HEAD /sentence-transformers/all-MiniLM-L6-v2/resolve/main/modules.json HTTP/11" 200 0
DEBUG:urllib3.connectionpool:https://huggingface.co:443 "HEAD /sentence-transformers/all-MiniLM-L6-v2/resolve/main/config_sentence_transformers.json HTTP/11" 200 0
DEBUG:urllib3.connectionpool:https://huggingface.co:443 "HEAD /sentence-transformers/all-MiniLM-L6-v2/resolve/main/README.md HTTP/11" 200 0
DEBUG:urllib3.connectionpool:https://huggingface.co:443 "HEAD /sentence-transformers/all-MiniLM-L6-v2/resolve/main/modules.json HTTP/11" 200 0
DEBUG:urllib3.connectionpool:https://huggingface.co:443 "HEAD /sentence-transformers/all-MiniLM-L6-v2/resolve/main/sentence_bert_config.json HTTP/11" 200 0
DEBUG:urllib3.connectionpool:https://huggingface.co:443 "HEAD /sentence-transformers/all-MiniLM-L6-v2/resolve/main/adapter_config.json HTTP/11" 404 0
DEBUG:urllib3.connectionpool:https://huggingface.co:443 "HEAD /sentence-transformers/all-MiniLM-L6-v2/resolve/main/config.json HTTP/11" 200 0
DEBUG:urllib3.connectionpool:https://huggingface.co:443 "HEAD /sentence-transformers/all-MiniLM-L6-v2/resolve/main/tokenizer_config.json HTTP/11" 200 0
DEBUG:urllib3.connectionpool:https://huggingface.co:443 "GET /api/models/sentence-transformers/all-MiniLM-L6-v2/revision/main HTTP/11" 200 6704
DEBUG:urllib3.connectionpool:https://huggingface.co:443 "GET /api/models/sentence-transformers/all-MiniLM-L6-v2 HTTP/11" 200 6704
INFO:chromadb.telemetry.product.posthog:Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
DEBUG:chromadb.config:Starting component System
DEBUG:chromadb.config:Starting component Posthog
DEBUG:chromadb.config:Starting component OpenTelemetryClient
DEBUG:chromadb.config:Starting component SqliteDB
DEBUG:chromadb.config:Starting component SimpleQuotaEnforcer
DEBUG:chromadb.config:Starting component SimpleRateLimitEnforcer
DEBUG:chromadb.config:Starting component LocalSegmentManager
DEBUG:chromadb.config:Starting component LocalExecutor
DEBUG:chromadb.config:Starting component SegmentAPI
DEBUG:chromadb.config:Starting component LocalHnswSegment
DEBUG:urllib3.connectionpool:https://huggingface.co:443 "HEAD /google/flan-t5-base/resolve/main/tokenizer_config.json HTTP/11" 200 0
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): us.i.posthog.com:443
DEBUG:urllib3.connectionpool:https://huggingface.co:443 "HEAD /google/flan-t5-base/resolve/main/config.json HTTP/11" 200 0
DEBUG:urllib3.connectionpool:https://us.i.posthog.com:443 "POST /batch/ HTTP/11" 200 15
DEBUG:urllib3.connectionpool:https://huggingface.co:443 "HEAD /google/flan-t5-base/resolve/main/generation_config.json HTTP/11" 200 0
WARNING:src.config:No order_items_df found. Product-level metrics limited.
DEBUG:matplotlib:matplotlib data path: /Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/matplotlib/mpl-data
DEBUG:matplotlib:CONFIGDIR=/Users/benpfeffer/.matplotlib
DEBUG:matplotlib:interactive is False
DEBUG:matplotlib:platform is darwin
DEBUG:matplotlib:CACHEDIR=/Users/benpfeffer/.matplotlib
DEBUG:matplotlib.font_manager:Using fontManager instance from /Users/benpfeffer/.matplotlib/fontlist-v390.json
DEBUG:matplotlib.pyplot:Loaded backend macosx version unknown.
DEBUG:tensorflow:Falling back to TensorFlow client; we recommended you install the Cloud TPU client directly with pip install cloud-tpu-client.
DEBUG:h5py._conv:Creating converter from 7 to 5
DEBUG:h5py._conv:Creating converter from 5 to 7
DEBUG:h5py._conv:Creating converter from 7 to 5
DEBUG:h5py._conv:Creating converter from 5 to 7
INFO:src.config:Computing extended metrics...
INFO:src.config:Computing basic KPIs...
DEBUG:src.config:Basic KPIs calculated: {'total_orders': 1360, 'total_revenue': 860979.0, 'unique_customers': 1091, 'avg_orders_per_customer': 1.2465627864344637}
INFO:src.config:Basic KPIs computation complete
INFO:src.config:KPIs: {'total_orders': 1360, 'total_revenue': 860979.0, 'unique_customers': 1091, 'avg_orders_per_customer': 1.2465627864344637}
INFO:src.config:Computing revenue over time with frequency M...
DEBUG:src.config:Revenue series shape: (45,)
INFO:src.config:Revenue over time computation complete
INFO:src.config:Performing customer segmentation...
DEBUG:src.config:Customer segmentation shape: (1091, 4)
INFO:src.config:Customer segmentation complete
INFO:src.config:Performing RFM analysis...
DEBUG:src.config:RFM analysis shape: (1091, 7)
INFO:src.config:RFM analysis complete
INFO:prophet:Disabling weekly seasonality. Run prophet with weekly_seasonality=True to override this.
INFO:prophet:Disabling daily seasonality. Run prophet with daily_seasonality=True to override this.
DEBUG:cmdstanpy:input tempfile: /var/folders/8p/tyj3gj5j7f54558fzrt60f700000gn/T/tmpyersnjcw/bp26_mxq.json
DEBUG:cmdstanpy:input tempfile: /var/folders/8p/tyj3gj5j7f54558fzrt60f700000gn/T/tmpyersnjcw/vn_77g4m.json
DEBUG:cmdstanpy:idx 0
DEBUG:cmdstanpy:running CmdStan, num_threads: None
DEBUG:cmdstanpy:CmdStan args: ['/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/prophet/stan_model/prophet_model.bin', 'random', 'seed=27638', 'data', 'file=/var/folders/8p/tyj3gj5j7f54558fzrt60f700000gn/T/tmpyersnjcw/bp26_mxq.json', 'init=/var/folders/8p/tyj3gj5j7f54558fzrt60f700000gn/T/tmpyersnjcw/vn_77g4m.json', 'output', 'file=/var/folders/8p/tyj3gj5j7f54558fzrt60f700000gn/T/tmpyersnjcw/prophet_modelop85jw_e/prophet_model-20241220164046.csv', 'method=optimize', 'algorithm=newton', 'iter=10000']
INFO:cmdstanpy:Chain [1] start processing
INFO:cmdstanpy:Chain [1] done processing
INFO:src.config:Revenue forecast generated.
INFO:sentence_transformers.SentenceTransformer:Use pytorch device_name: mps
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): huggingface.co:443
DEBUG:urllib3.connectionpool:https://huggingface.co:443 "HEAD /sentence-transformers/all-MiniLM-L6-v2/resolve/main/modules.json HTTP/11" 200 0
DEBUG:urllib3.connectionpool:https://huggingface.co:443 "HEAD /sentence-transformers/all-MiniLM-L6-v2/resolve/main/config_sentence_transformers.json HTTP/11" 200 0
DEBUG:urllib3.connectionpool:https://huggingface.co:443 "HEAD /sentence-transformers/all-MiniLM-L6-v2/resolve/main/README.md HTTP/11" 200 0
DEBUG:urllib3.connectionpool:https://huggingface.co:443 "HEAD /sentence-transformers/all-MiniLM-L6-v2/resolve/main/modules.json HTTP/11" 200 0
DEBUG:urllib3.connectionpool:https://huggingface.co:443 "HEAD /sentence-transformers/all-MiniLM-L6-v2/resolve/main/sentence_bert_config.json HTTP/11" 200 0
DEBUG:urllib3.connectionpool:https://huggingface.co:443 "HEAD /sentence-transformers/all-MiniLM-L6-v2/resolve/main/adapter_config.json HTTP/11" 404 0
DEBUG:urllib3.connectionpool:https://huggingface.co:443 "HEAD /sentence-transformers/all-MiniLM-L6-v2/resolve/main/config.json HTTP/11" 200 0
DEBUG:urllib3.connectionpool:https://huggingface.co:443 "HEAD /sentence-transformers/all-MiniLM-L6-v2/resolve/main/tokenizer_config.json HTTP/11" 200 0
DEBUG:urllib3.connectionpool:https://huggingface.co:443 "GET /api/models/sentence-transformers/all-MiniLM-L6-v2/revision/main HTTP/11" 200 6704
DEBUG:urllib3.connectionpool:https://huggingface.co:443 "GET /api/models/sentence-transformers/all-MiniLM-L6-v2 HTTP/11" 200 6704
INFO:chromadb.telemetry.product.posthog:Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
DEBUG:chromadb.config:Starting component System
DEBUG:chromadb.config:Starting component Posthog
DEBUG:chromadb.config:Starting component OpenTelemetryClient
DEBUG:chromadb.config:Starting component SqliteDB
DEBUG:chromadb.config:Starting component SimpleQuotaEnforcer
DEBUG:chromadb.config:Starting component SimpleRateLimitEnforcer
DEBUG:chromadb.config:Starting component LocalSegmentManager
DEBUG:chromadb.config:Starting component LocalExecutor
DEBUG:chromadb.config:Starting component SegmentAPI
DEBUG:chromadb.config:Starting component LocalHnswSegment
DEBUG:urllib3.connectionpool:https://huggingface.co:443 "HEAD /google/flan-t5-base/resolve/main/tokenizer_config.json HTTP/11" 200 0
DEBUG:urllib3.connectionpool:https://huggingface.co:443 "HEAD /google/flan-t5-base/resolve/main/config.json HTTP/11" 200 0
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): us.i.posthog.com:443
DEBUG:urllib3.connectionpool:https://us.i.posthog.com:443 "POST /batch/ HTTP/11" 200 15
DEBUG:urllib3.connectionpool:https://huggingface.co:443 "HEAD /google/flan-t5-base/resolve/main/generation_config.json HTTP/11" 200 0
WARNING:src.config:No order_items_df found. Product-level metrics limited.
DEBUG:matplotlib:matplotlib data path: /Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/matplotlib/mpl-data
DEBUG:matplotlib:CONFIGDIR=/Users/benpfeffer/.matplotlib
DEBUG:matplotlib:interactive is False
DEBUG:matplotlib:platform is darwin
DEBUG:matplotlib:CACHEDIR=/Users/benpfeffer/.matplotlib
DEBUG:matplotlib.font_manager:Using fontManager instance from /Users/benpfeffer/.matplotlib/fontlist-v390.json
DEBUG:matplotlib.pyplot:Loaded backend macosx version unknown.
DEBUG:tensorflow:Falling back to TensorFlow client; we recommended you install the Cloud TPU client directly with pip install cloud-tpu-client.
DEBUG:h5py._conv:Creating converter from 7 to 5
DEBUG:h5py._conv:Creating converter from 5 to 7
DEBUG:h5py._conv:Creating converter from 7 to 5
DEBUG:h5py._conv:Creating converter from 5 to 7
INFO:src.config:Computing extended metrics...
INFO:src.config:Computing basic KPIs...
DEBUG:src.config:Basic KPIs calculated: {'total_orders': 1360, 'total_revenue': 860979.0, 'unique_customers': 1091, 'avg_orders_per_customer': 1.2465627864344637}
INFO:src.config:Basic KPIs computation complete
INFO:src.config:KPIs: {'total_orders': 1360, 'total_revenue': 860979.0, 'unique_customers': 1091, 'avg_orders_per_customer': 1.2465627864344637}
INFO:src.config:Computing revenue over time with frequency M...
DEBUG:src.config:Revenue series shape: (45,)
INFO:src.config:Revenue over time computation complete
INFO:src.config:Performing customer segmentation...
DEBUG:src.config:Customer segmentation shape: (1091, 4)
INFO:src.config:Customer segmentation complete
INFO:src.config:Performing RFM analysis...
DEBUG:src.config:RFM analysis shape: (1091, 7)
INFO:src.config:RFM analysis complete
INFO:prophet:Disabling weekly seasonality. Run prophet with weekly_seasonality=True to override this.
INFO:prophet:Disabling daily seasonality. Run prophet with daily_seasonality=True to override this.
DEBUG:cmdstanpy:input tempfile: /var/folders/8p/tyj3gj5j7f54558fzrt60f700000gn/T/tmpncldsgff/e_bis0j6.json
DEBUG:cmdstanpy:input tempfile: /var/folders/8p/tyj3gj5j7f54558fzrt60f700000gn/T/tmpncldsgff/e0ww7m5w.json
DEBUG:cmdstanpy:idx 0
DEBUG:cmdstanpy:running CmdStan, num_threads: None
DEBUG:cmdstanpy:CmdStan args: ['/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/prophet/stan_model/prophet_model.bin', 'random', 'seed=92022', 'data', 'file=/var/folders/8p/tyj3gj5j7f54558fzrt60f700000gn/T/tmpncldsgff/e_bis0j6.json', 'init=/var/folders/8p/tyj3gj5j7f54558fzrt60f700000gn/T/tmpncldsgff/e0ww7m5w.json', 'output', 'file=/var/folders/8p/tyj3gj5j7f54558fzrt60f700000gn/T/tmpncldsgff/prophet_modellza2bkjn/prophet_model-20241220164427.csv', 'method=optimize', 'algorithm=newton', 'iter=10000']
INFO:cmdstanpy:Chain [1] start processing
INFO:cmdstanpy:Chain [1] done processing
INFO:src.config:Revenue forecast generated.
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): huggingface.co:443
DEBUG:urllib3.connectionpool:https://huggingface.co:443 "HEAD /sentence-transformers/all-MiniLM-L6-v2/resolve/main/modules.json HTTP/11" 200 0
DEBUG:urllib3.connectionpool:https://huggingface.co:443 "HEAD /sentence-transformers/all-MiniLM-L6-v2/resolve/main/config_sentence_transformers.json HTTP/11" 200 0
DEBUG:urllib3.connectionpool:https://huggingface.co:443 "HEAD /sentence-transformers/all-MiniLM-L6-v2/resolve/main/README.md HTTP/11" 200 0
DEBUG:urllib3.connectionpool:https://huggingface.co:443 "HEAD /sentence-transformers/all-MiniLM-L6-v2/resolve/main/modules.json HTTP/11" 200 0
DEBUG:urllib3.connectionpool:https://huggingface.co:443 "HEAD /sentence-transformers/all-MiniLM-L6-v2/resolve/main/sentence_bert_config.json HTTP/11" 200 0
DEBUG:urllib3.connectionpool:https://huggingface.co:443 "HEAD /sentence-transformers/all-MiniLM-L6-v2/resolve/main/adapter_config.json HTTP/11" 404 0
DEBUG:urllib3.connectionpool:https://huggingface.co:443 "HEAD /sentence-transformers/all-MiniLM-L6-v2/resolve/main/config.json HTTP/11" 200 0
DEBUG:urllib3.connectionpool:https://huggingface.co:443 "HEAD /sentence-transformers/all-MiniLM-L6-v2/resolve/main/tokenizer_config.json HTTP/11" 200 0
DEBUG:urllib3.connectionpool:https://huggingface.co:443 "GET /api/models/sentence-transformers/all-MiniLM-L6-v2/revision/main HTTP/11" 200 6704
DEBUG:urllib3.connectionpool:https://huggingface.co:443 "GET /api/models/sentence-transformers/all-MiniLM-L6-v2 HTTP/11" 200 6704
INFO:chromadb.telemetry.product.posthog:Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
DEBUG:chromadb.config:Starting component System
DEBUG:chromadb.config:Starting component Posthog
DEBUG:chromadb.config:Starting component OpenTelemetryClient
DEBUG:chromadb.config:Starting component SqliteDB
DEBUG:chromadb.config:Starting component SimpleQuotaEnforcer
DEBUG:chromadb.config:Starting component SimpleRateLimitEnforcer
DEBUG:chromadb.config:Starting component LocalSegmentManager
DEBUG:chromadb.config:Starting component LocalExecutor
DEBUG:chromadb.config:Starting component SegmentAPI
WARNING:src.config:No order_items_df found. Product-level metrics limited.
DEBUG:matplotlib:matplotlib data path: /Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/matplotlib/mpl-data
DEBUG:matplotlib:CONFIGDIR=/Users/benpfeffer/.matplotlib
DEBUG:matplotlib:interactive is False
DEBUG:matplotlib:platform is darwin
DEBUG:matplotlib:CACHEDIR=/Users/benpfeffer/.matplotlib
DEBUG:matplotlib.font_manager:Using fontManager instance from /Users/benpfeffer/.matplotlib/fontlist-v390.json
DEBUG:matplotlib.pyplot:Loaded backend macosx version unknown.
DEBUG:tensorflow:Falling back to TensorFlow client; we recommended you install the Cloud TPU client directly with pip install cloud-tpu-client.
DEBUG:h5py._conv:Creating converter from 7 to 5
DEBUG:h5py._conv:Creating converter from 5 to 7
DEBUG:h5py._conv:Creating converter from 7 to 5
DEBUG:h5py._conv:Creating converter from 5 to 7
INFO:src.config:Computing extended metrics...
INFO:src.config:Computing basic KPIs...
DEBUG:src.config:Basic KPIs calculated: {'total_orders': 1360, 'total_revenue': 860979.0, 'unique_customers': 1091, 'avg_orders_per_customer': 1.2465627864344637}
INFO:src.config:Basic KPIs computation complete
INFO:src.config:KPIs: {'total_orders': 1360, 'total_revenue': 860979.0, 'unique_customers': 1091, 'avg_orders_per_customer': 1.2465627864344637}
INFO:src.config:Computing revenue over time with frequency M...
DEBUG:src.config:Revenue series shape: (45,)
INFO:src.config:Revenue over time computation complete
INFO:src.config:Performing customer segmentation...
DEBUG:src.config:Customer segmentation shape: (1091, 4)
INFO:src.config:Customer segmentation complete
INFO:src.config:Performing RFM analysis...
DEBUG:src.config:RFM analysis shape: (1091, 7)
INFO:src.config:RFM analysis complete
INFO:prophet:Disabling weekly seasonality. Run prophet with weekly_seasonality=True to override this.
INFO:prophet:Disabling daily seasonality. Run prophet with daily_seasonality=True to override this.
DEBUG:cmdstanpy:input tempfile: /var/folders/8p/tyj3gj5j7f54558fzrt60f700000gn/T/tmpfeeyq2p0/h3uxeiw9.json
DEBUG:cmdstanpy:input tempfile: /var/folders/8p/tyj3gj5j7f54558fzrt60f700000gn/T/tmpfeeyq2p0/ucfbsk4d.json
DEBUG:cmdstanpy:idx 0
DEBUG:cmdstanpy:running CmdStan, num_threads: None
DEBUG:cmdstanpy:CmdStan args: ['/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/prophet/stan_model/prophet_model.bin', 'random', 'seed=41817', 'data', 'file=/var/folders/8p/tyj3gj5j7f54558fzrt60f700000gn/T/tmpfeeyq2p0/h3uxeiw9.json', 'init=/var/folders/8p/tyj3gj5j7f54558fzrt60f700000gn/T/tmpfeeyq2p0/ucfbsk4d.json', 'output', 'file=/var/folders/8p/tyj3gj5j7f54558fzrt60f700000gn/T/tmpfeeyq2p0/prophet_modelzrthvlns/prophet_model-20241220164614.csv', 'method=optimize', 'algorithm=newton', 'iter=10000']
INFO:cmdstanpy:Chain [1] start processing
INFO:cmdstanpy:Chain [1] done processing
INFO:src.config:Revenue forecast generated.
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): huggingface.co:443
DEBUG:urllib3.connectionpool:https://huggingface.co:443 "HEAD /sentence-transformers/all-MiniLM-L6-v2/resolve/main/modules.json HTTP/11" 200 0
DEBUG:urllib3.connectionpool:https://huggingface.co:443 "HEAD /sentence-transformers/all-MiniLM-L6-v2/resolve/main/config_sentence_transformers.json HTTP/11" 200 0
DEBUG:urllib3.connectionpool:https://huggingface.co:443 "HEAD /sentence-transformers/all-MiniLM-L6-v2/resolve/main/README.md HTTP/11" 200 0
DEBUG:urllib3.connectionpool:https://huggingface.co:443 "HEAD /sentence-transformers/all-MiniLM-L6-v2/resolve/main/modules.json HTTP/11" 200 0
DEBUG:urllib3.connectionpool:https://huggingface.co:443 "HEAD /sentence-transformers/all-MiniLM-L6-v2/resolve/main/sentence_bert_config.json HTTP/11" 200 0
DEBUG:urllib3.connectionpool:https://huggingface.co:443 "HEAD /sentence-transformers/all-MiniLM-L6-v2/resolve/main/adapter_config.json HTTP/11" 404 0
DEBUG:urllib3.connectionpool:https://huggingface.co:443 "HEAD /sentence-transformers/all-MiniLM-L6-v2/resolve/main/config.json HTTP/11" 200 0
DEBUG:urllib3.connectionpool:https://huggingface.co:443 "HEAD /sentence-transformers/all-MiniLM-L6-v2/resolve/main/tokenizer_config.json HTTP/11" 200 0
DEBUG:urllib3.connectionpool:https://huggingface.co:443 "GET /api/models/sentence-transformers/all-MiniLM-L6-v2/revision/main HTTP/11" 200 6704
DEBUG:urllib3.connectionpool:https://huggingface.co:443 "GET /api/models/sentence-transformers/all-MiniLM-L6-v2 HTTP/11" 200 6704
INFO:chromadb.telemetry.product.posthog:Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
DEBUG:chromadb.config:Starting component System
DEBUG:chromadb.config:Starting component Posthog
DEBUG:chromadb.config:Starting component OpenTelemetryClient
DEBUG:chromadb.config:Starting component SqliteDB
DEBUG:chromadb.config:Starting component SimpleQuotaEnforcer
DEBUG:chromadb.config:Starting component SimpleRateLimitEnforcer
DEBUG:chromadb.config:Starting component LocalSegmentManager
DEBUG:chromadb.config:Starting component LocalExecutor
DEBUG:chromadb.config:Starting component SegmentAPI
DEBUG:chromadb.config:Starting component LocalHnswSegment
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): us.i.posthog.com:443
DEBUG:urllib3.connectionpool:https://huggingface.co:443 "HEAD /google/flan-t5-base/resolve/main/tokenizer_config.json HTTP/11" 200 0
DEBUG:urllib3.connectionpool:https://huggingface.co:443 "HEAD /google/flan-t5-base/resolve/main/config.json HTTP/11" 200 0
ERROR:src.config:Error setting up chatbot: Using `low_cpu_mem_usage=True` or a `device_map` requires Accelerate: `pip install 'accelerate>=0.26.0'`
WARNING:src.config:Chatbot not configured.
INFO:src.config:All analyses and forecasts completed.
DEBUG:urllib3.connectionpool:https://us.i.posthog.com:443 "POST /batch/ HTTP/11" 200 15
WARNING:src.config:No order_items_df found. Product-level metrics limited.
DEBUG:matplotlib:matplotlib data path: /Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/matplotlib/mpl-data
DEBUG:matplotlib:CONFIGDIR=/Users/benpfeffer/.matplotlib
DEBUG:matplotlib:interactive is False
DEBUG:matplotlib:platform is darwin
DEBUG:matplotlib:CACHEDIR=/Users/benpfeffer/.matplotlib
DEBUG:matplotlib.font_manager:Using fontManager instance from /Users/benpfeffer/.matplotlib/fontlist-v390.json
DEBUG:matplotlib.pyplot:Loaded backend macosx version unknown.
DEBUG:tensorflow:Falling back to TensorFlow client; we recommended you install the Cloud TPU client directly with pip install cloud-tpu-client.
DEBUG:h5py._conv:Creating converter from 7 to 5
DEBUG:h5py._conv:Creating converter from 5 to 7
DEBUG:h5py._conv:Creating converter from 7 to 5
DEBUG:h5py._conv:Creating converter from 5 to 7
INFO:src.config:Computing extended metrics...
INFO:src.config:Computing basic KPIs...
DEBUG:src.config:Basic KPIs calculated: {'total_orders': 1360, 'total_revenue': 860979.0, 'unique_customers': 1091, 'avg_orders_per_customer': 1.2465627864344637}
INFO:src.config:Basic KPIs computation complete
INFO:src.config:KPIs: {'total_orders': 1360, 'total_revenue': 860979.0, 'unique_customers': 1091, 'avg_orders_per_customer': 1.2465627864344637}
INFO:src.config:Computing revenue over time with frequency ME...
DEBUG:src.config:Revenue series shape: (45,)
INFO:src.config:Revenue over time computation complete
INFO:src.config:Performing customer segmentation...
DEBUG:src.config:Customer segmentation shape: (1091, 4)
INFO:src.config:Customer segmentation complete
INFO:src.config:Performing RFM analysis...
DEBUG:src.config:RFM analysis shape: (1091, 7)
INFO:src.config:RFM analysis complete
INFO:prophet:Disabling weekly seasonality. Run prophet with weekly_seasonality=True to override this.
INFO:prophet:Disabling daily seasonality. Run prophet with daily_seasonality=True to override this.
DEBUG:cmdstanpy:input tempfile: /var/folders/8p/tyj3gj5j7f54558fzrt60f700000gn/T/tmpbmf3ghcs/fr98zjw7.json
DEBUG:cmdstanpy:input tempfile: /var/folders/8p/tyj3gj5j7f54558fzrt60f700000gn/T/tmpbmf3ghcs/t3r1jagw.json
DEBUG:cmdstanpy:idx 0
DEBUG:cmdstanpy:running CmdStan, num_threads: None
DEBUG:cmdstanpy:CmdStan args: ['/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/prophet/stan_model/prophet_model.bin', 'random', 'seed=81300', 'data', 'file=/var/folders/8p/tyj3gj5j7f54558fzrt60f700000gn/T/tmpbmf3ghcs/fr98zjw7.json', 'init=/var/folders/8p/tyj3gj5j7f54558fzrt60f700000gn/T/tmpbmf3ghcs/t3r1jagw.json', 'output', 'file=/var/folders/8p/tyj3gj5j7f54558fzrt60f700000gn/T/tmpbmf3ghcs/prophet_modeld_tyr4ht/prophet_model-20241220164709.csv', 'method=optimize', 'algorithm=newton', 'iter=10000']
INFO:cmdstanpy:Chain [1] start processing
INFO:cmdstanpy:Chain [1] done processing
INFO:src.config:Revenue forecast generated.
INFO:sentence_transformers.SentenceTransformer:Load pretrained SentenceTransformer: sentence-transformers/all-MiniLM-L6-v2
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): huggingface.co:443
DEBUG:urllib3.connectionpool:https://huggingface.co:443 "HEAD /sentence-transformers/all-MiniLM-L6-v2/resolve/main/modules.json HTTP/11" 200 0
DEBUG:urllib3.connectionpool:https://huggingface.co:443 "HEAD /sentence-transformers/all-MiniLM-L6-v2/resolve/main/config_sentence_transformers.json HTTP/11" 200 0
DEBUG:urllib3.connectionpool:https://huggingface.co:443 "HEAD /sentence-transformers/all-MiniLM-L6-v2/resolve/main/README.md HTTP/11" 200 0
DEBUG:urllib3.connectionpool:https://huggingface.co:443 "HEAD /sentence-transformers/all-MiniLM-L6-v2/resolve/main/modules.json HTTP/11" 200 0
DEBUG:urllib3.connectionpool:https://huggingface.co:443 "HEAD /sentence-transformers/all-MiniLM-L6-v2/resolve/main/sentence_bert_config.json HTTP/11" 200 0
DEBUG:urllib3.connectionpool:https://huggingface.co:443 "HEAD /sentence-transformers/all-MiniLM-L6-v2/resolve/main/adapter_config.json HTTP/11" 404 0
DEBUG:urllib3.connectionpool:https://huggingface.co:443 "HEAD /sentence-transformers/all-MiniLM-L6-v2/resolve/main/config.json HTTP/11" 200 0
DEBUG:urllib3.connectionpool:https://huggingface.co:443 "HEAD /sentence-transformers/all-MiniLM-L6-v2/resolve/main/tokenizer_config.json HTTP/11" 200 0
DEBUG:urllib3.connectionpool:https://huggingface.co:443 "GET /api/models/sentence-transformers/all-MiniLM-L6-v2/revision/main HTTP/11" 200 6704
DEBUG:urllib3.connectionpool:https://huggingface.co:443 "GET /api/models/sentence-transformers/all-MiniLM-L6-v2 HTTP/11" 200 6704
INFO:chromadb.telemetry.product.posthog:Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
DEBUG:chromadb.config:Starting component System
DEBUG:chromadb.config:Starting component Posthog
DEBUG:chromadb.config:Starting component OpenTelemetryClient
DEBUG:chromadb.config:Starting component SqliteDB
DEBUG:chromadb.config:Starting component SimpleQuotaEnforcer
DEBUG:chromadb.config:Starting component SimpleRateLimitEnforcer
DEBUG:chromadb.config:Starting component LocalSegmentManager
DEBUG:chromadb.config:Starting component LocalExecutor
DEBUG:chromadb.config:Starting component SegmentAPI
DEBUG:chromadb.config:Starting component LocalHnswSegment
DEBUG:urllib3.connectionpool:https://huggingface.co:443 "HEAD /google/flan-t5-base/resolve/main/tokenizer_config.json HTTP/11" 200 0
DEBUG:urllib3.connectionpool:https://huggingface.co:443 "HEAD /google/flan-t5-base/resolve/main/config.json HTTP/11" 200 0
ERROR:src.config:Error setting up chatbot: Using `low_cpu_mem_usage=True` or a `device_map` requires Accelerate: `pip install 'accelerate>=0.26.0'`
WARNING:src.config:Chatbot not configured.
INFO:src.config:All analyses and forecasts completed.
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): us.i.posthog.com:443
DEBUG:urllib3.connectionpool:https://us.i.posthog.com:443 "POST /batch/ HTTP/11" 200 15
